# BITCH Configuration
# See DOCUMENTATION.md for complete documentation

[network]
gcs_listen_port = 14550
gcs_listen_address = "0.0.0.0"
router_address = "127.0.0.1"
router_port = 14551

[logging]
level = "info"  # trace, debug, info, warn, error

[plugins]
directory = "plugins"

[plugins.load]
arm_notifier = "arm_notifier.lua"
# webhook_example = "webhook_example.lua"

[modifiers]
directory = "modifiers"

[modifiers.load]
always_armed = "always_armed.lua"

# Rules - See DOCUMENTATION.md for complete rule system documentation
# Direction: "gcs_to_router" (default), "router_to_gcs", or "both"
# Actions: forward, block, modify, delay, batch

[[rules]]
message_type = "COMMAND_LONG"
command = "MAV_CMD_COMPONENT_ARM_DISARM"
actions = ["batch", "delay"]
batch_count = 2
batch_timeout_seconds = 60
batch_timeout_forward = true
batch_key = "arm_swarm"
delay_seconds = 5
auto_ack = true
plugins = ["arm_notifier"]
direction = "gcs_to_router"
description = "Synchronize ARM commands across 2 drones, then delay 5s before arming"

[rules.conditions]
param1 = 1.0
